class Tost
{
    constructor(t)
    {
        this._title=!1!==t.title&&(t.title||"Title"),
        this._text=t.text||"Message...",
        this._theme=t.theme||"default",
        this._autohide=t.autohide&&!0,
        this._interval=+t.interval||5e3,
        this._create(),
        this._el.addEventListener("click",t=> {t.target.classList.contains("tost__close")&&this._hide()}),
        this._show()
    }
    _show() 
    { 
        this._el.classList.add("tost_showing"),
        this._el.classList.add("tost_show"),
        window.setTimeout(()=> { this._el.classList.remove("tost_showing")}),
        this._autohide&&setTimeout(()=>{this._hide()},
        this._interval)
    }
    _hide()
    {
        this._el.classList.add("tost_showing"),
        this._el.addEventListener("transitionend",
        ()=>
        {
            this._el.classList.remove("tost_showing"),
            this._el.classList.remove("tost_show"),
            this._el.remove()
        },
        {once:!0});
        
        const t=new CustomEvent("hide.tost",{detail:{target:this._el}});
        document.dispatchEvent(t)
    }
    _create()
    {
        const t=document.createElement("div");
        t.classList.add("tost"), t.classList.add(`tost_${this._theme}`);
        let e='{header}<div class="tost__body"></div><button class="tost__close" type="button"></button>';
        const s=!1===this._title?"":'<div class="tost__header"></div>';
        if(e=e.replace("{header}",s),
        t.innerHTML=e,
        this._title?t.querySelector(".tost__header").textContent=this._title:t.classList.add("tost_message"),
        t.querySelector(".tost__body").textContent=this._text,
        this._el=t,!document.querySelector(".tost-container"))
        {
            const t=document.createElement("div");
            t.classList.add("tost-container"),document.body.append(t)
        }
        document.querySelector(".tost-container").append(this._el)
    }
}
